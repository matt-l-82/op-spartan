var give_vars;jQuery(document).ready(function(e){function a(e){var a={symbol:give_vars.currency_sign,decimal:give_vars.decimal_separator,thousand:give_vars.thousands_separator,precision:give_vars.currency_decimals,format:"before"===give_vars.currency_pos?"%s%v":"%v%s"};return accounting.formatMoney(e,a)}function i(e,a){return e=accounting.unformat(e,give_vars.decimal_separator).toString(),a="undefined"!=a&&a,e=!1!==a?parseFloat(e).toFixed(a):parseFloat(e).toFixed(give_vars.currency_decimals)}var n=e("body"),o=e('input[name="give_fee_recovery"]:radio'),_=e(".give_fee_all_fields"),r=e('.give-forminp input[name="give_fee_configuration"]:radio'),t=e('.give-forminp input[name="give_fee_mode"]:radio'),v=e(".give-setting-tab-body .give_fee_gateways_fields .give_fee_gateway input:radio"),g=e(".give_fee_all_gateway"),c=e(".give_fee_per_gateway"),f=e(".give_fee_checkbox_label"),s=e(".give_fee_explanation");o.on("change",function(){var a=e('input[name="give_fee_recovery"]:radio:checked').val();"enabled"===a?(_.show(),r.change(),t.change(),v.change()):_.hide()}).change(),r.on("change",function(){var a=e('input[name="give_fee_recovery"]:radio:checked').val(),i=e('input[name="give_fee_configuration"]:radio:checked').val();return"enabled"===a&&void("all_gateways"===i?(c.hide(),g.show()):(c.show(),g.hide()))}).change(),t.on("change",function(){var a=e('input[name="give_fee_recovery"]:radio:checked').val(),i=e('input[name="give_fee_mode"]:radio:checked').val();return"enabled"===a&&void(e(".give_fee_mode").is(":visible")&&("donor_opt_in"===i?(f.show(),s.hide()):(f.hide(),s.show())))}).change(),v.on("change",function(){var a=e('input[name="give_fee_recovery"]:radio:checked').val(),i=jQuery(".give_fee_gateways_fields input:radio:checked");return"enabled"===a&&void i.each(function(){var a=e(this),i=a.val();"enabled"===i?(a.closest("fieldset.give_fee_gateway").find(".give_fee_gateway_fee_percentage").show(),a.closest("fieldset.give_fee_gateway").find(".give_fee_gateway_fee_base_amount").show()):(a.closest("fieldset.give_fee_gateway").find(".give_fee_gateway_fee_percentage").hide(),a.closest("fieldset.give_fee_gateway").find(".give_fee_gateway_fee_base_amount").hide())})}).change();var d=e('._form_give_fee_recovery_field input[name="_form_give_fee_recovery"]:radio'),l=e('._form_give_fee_mode_field input[name="_form_give_fee_mode"]:radio'),u=e('._form_give_fee_configuration_field input[name="_form_give_fee_configuration"]:radio'),h=e("#form_fee_options .give_fee_gateways_fields .give_fee_gateway input:radio");d.on("change",function(){var a=e('input[name="_form_give_fee_recovery"]:radio:checked').val();"enabled"===a?(_.show(),l.change(),u.change()):_.hide()}).change(),l.on("change",function(){var a=e('input[name="_form_give_fee_recovery"]:radio:checked').val(),i=e('input[name="_form_give_fee_mode"]:radio:checked').val();return"enabled"===a&&void("donor_opt_in"===i?(f.show(),s.hide()):(f.hide(),s.show()))}).change(),u.on("change",function(){var a=e('input[name="_form_give_fee_recovery"]:radio:checked').val(),i=e('input[name="_form_give_fee_configuration"]:radio:checked').val(),n=e(this);return"enabled"===a&&void("all_gateways"===i?(n.addClass("no-border"),c.hide(),g.show()):(n.removeClass("no-border"),c.show(),g.hide()))}).change(),h.on("change",function(){var a=e('input[name="_form_give_fee_recovery"]:radio:checked').val(),i=e(".give_fee_gateways_fields input:radio:checked");return"enabled"===a&&void i.each(function(a,i){var n=jQuery(i).val(),o=e(this);"enabled"===n?(o.closest(".give_fee_gateway").find(".give_fee_percentage").show(),o.closest(".give_fee_gateway").find(".give_fee_base_amount").show()):(o.closest(".give_fee_gateway").find(".give_fee_percentage").hide(),o.closest(".give_fee_gateway").find(".give_fee_base_amount").hide())})}).change();var m=parseFloat(give_fee_unformat_amount(e("#give-payment-fee-amount").val())),p=parseFloat(give_fee_unformat_amount(e("#give-payment-total").val()));n.on("focusout","#give-payment-fee-amount",function(){var i=e("#give-payment-total"),n=parseFloat(give_fee_unformat_amount(e(this).val())),o=parseFloat(give_fee_unformat_amount(i.val())),_=0,r=give_vars.currency_decimals,t=give_vars.currency_sign;1>=parseInt(r)&&(r=2),give_vars.currency_sign="",m!==n?(n>m?(_=n-m,o=p+_):n<m&&(_=m-n,o=p-_),i.val(a(o.toFixed(r)))):i.val(a(p.toFixed(r))),give_vars.currency_sign=t});var y=e("#poststuff"),w=give_vars.thousands_separator,b=give_vars.decimal_separator,k="",F="",x="",C=b===w?1:0;y.on("keyup","input.give-fee-recovery-field",function(){var a="hide";k=(e(this).val().match(new RegExp(w,"g"))||[]).length,F=(e(this).val().match(new RegExp("[a-zA-Z]","g"))||[]).length,a=-1!==e(this).val().indexOf(w)&&C<k?"show":F?"show":"hide",e(this).giveHintCss(a,{label:give_vars.price_format_guide.trim()}),k=F=""}),y.on("focusout","input.give-fee-recovery-field",function(){var a=give_vars.currency_decimals;1>=parseInt(a)&&(a=2),x=""===e(this).val()?i(e(this).attr("placeholder"),a):i(e(this).val(),a),x=x.replace(".",b),-1!==x.indexOf("-")&&(x=x.replace("-","")),e(this).giveHintCss("hide",{label:give_vars.price_format_guide.trim()}),e(this).val(x)}),n.on("change","#recount-stats-type",function(){var a=e("option:selected",e(this)).data("type"),i=e("option:selected",e(this)).val();"recount-form"===a&&"Give_Tools_Recount_Form_Fee_Earnings"===i&&(e("#"+a).hide(),e("#recount-form-fee-earnings").show())})});